# JWT認証とは
## JWTとは
- JSON Web Token(JWT)
- JWTは,HTTPヘッダーやクエリパラメータに載せられるように
  1. JSONデータをURLセーフする方法を規定したもの => JSONデータをBASE64URLエンコードする
  2. JSONデータをコンパクトにする方法を規定したもの => よく使用されるデータ項目を略称にして、JSONキーを短くするこれによってJSONデータをコンパクトにする
    省略形の一例
    省略名	項目名	説明
    iss |	issuer         |	JWTの発行者
    sub |	subject        |	ユーザの識別子などJWTの主体
    aud |	audience       |	JWTの受信者
    exp |	expiration time|	JWTの有効期限
    nbf |	Not Before     |	JWTの有効開始日時
    iat |	Issued At      |	JWTの発行日時
    jti |	JWT ID         |	JWTの一意な識別子
    JWTではJSONのデータ項目(キーと値のペア)をClaim(クレーム)と呼ぶ
    このようにクレームとして定義された情報をエンコードしてデータを小さくして、HTTPヘッダーやクエリパラメータに載せられるようにします。

## JWSとは
    JWTはBASE64URLエンコードされているだけなため、セキュリティ面ではなにも担保されていない
    BASE64URLデコードすればすぐにもとのデータ形式に戻すことができるし、改ざんも可能
    この改ざんを防止(改ざんを検知する仕組み)する手段がJWS
    JWSは改ざん自体を防ぐものではなく、改ざんされたJWSどうかを検知することができる
    JWSの仕組み
    1. HTTPヘッダーとペイロード(ヘッダーに載せたいデータ)をBASE64URLでエンコードする
    2. 1のエンコードしたものを.でくっつける
    3. 2の結果を暗号鍵とヘッダーのalgに指定された方式で暗号化して、BASE64URLでエンコードする
    4. 2と3の結果を.でくっつける
    5. エンコードされたヘッダー.エンコードされたペイロード.エンコードされた暗号鍵とヘッダーのalgに応じて暗号化された前二つの情報(トークン)

## JWSの検証
    JWSの仕組み上、前の二つの情報はBASE64URlでエンコードされているだけなため、情報を確認することは簡単
    改ざん自体も可能。しかし３番目の情報に関しては不可能

    - 暗号鍵は信頼している相手しか持っていない
    - 暗号化した内容は同じ暗号鍵を持っていなければ復号化できる
    上記の２点から信頼した相手からのJWSであれば、復号化した情報が内容が改ざんされていないことになる

## JWTによる認証
